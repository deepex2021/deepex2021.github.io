# 订单相关

## 获取全部委托

获取全部委托

### HTTP请求: 

- GET /open/api/v2/all_order

- 旧接口 /open/api/all_order 仍保留,但已经不建议使用
- v2版本变化: 去掉了结果返回值中的tradeList成交记录,提升效率;如果需要单一订单的成交信息,可以使用 /open/api/order_info 接口



> 响应

```json
{
    "code": "0",
    "msg": "suc",
    "data": {
        "count":10,
        "orderList":[
            {
                "side":"BUY",
                "total_price":"0.10000000",
                "created_at":1510993841000,
                "avg_price":"0.10000000",
                "countCoin":"btc",
                "source":1,
                "type":1,
                "side_msg":"买入",
                "volume":"1.000",
                "price":"0.10000000",
                "source_msg":"WEB",
                "status_msg":"完全成交",
                "deal_volume":"1.00000000",
                "id":424,
                "remain_volume":"0.00000000",
                "baseCoin":"eth",
                "status":2
            },
            ...
        ]
    }
}
```

### 请求参数

| 参数      | 填写类型 | 说明                                            |
| --------- | -------- | ----------------------------------------------- |
| symbol    | 必填     | 交易对，btcusdt                  |
| startDate | 选填     | （新增）开始时间，精确到秒“yyyy-MM-dd mm:hh:ss” |
| endDate   | 选填     | （新增）结束时间，精确到秒“yyyy-MM-dd mm:hh:ss” |
| pageSize  | 选填     | 页面大小                                        |
| page      | 选填     | 页码                                            |
| api_key   | 必填     | api_key                                    |
| time      | 必填     | 时间戳                                          |
| sign      | 必填     | 签名                                            |

### 响应数据

| 字段 | 实例  | 解释       |
| ---- | ----- | ---------- |
| code | 0     |            |
| msg  | "suc" | code>0失败 |
| data | 如上图 |


## 获取全部成交记录
获取全部成交记录

### HTTP请求: 
- GET /open/api/all_trade


> 响应

```json
{
    "code":"0",
    "msg":"suc",
    "data":{
        "count":1000,
        "resultList":[
            {
                "side":"SELL",
                "role":"taker",
                "ask_user_id":10001,
                "fee":"0.50000000",
                "returnFeeStatus":false,
                "deal_price":"5.00",
                "type":"卖出",
                "bid_id":10001,
                "ask_id":10002,
                "volume":"1",
                "feeCoin":"USDT",
                "price":"5.00000000",
                "ctime":1608345691161,
                "id":10001,
                "bid_user_id":10001
            },
            ...
        ]
    }
}
```

### 请求参数

| 参数      | 填写类型 | 说明                                            |
| --------- | -------- | ----------------------------------------------- |
| symbol    | 必填     | 交易对，btcusdt                   |
| startDate | 选填     | （新增）开始时间，精确到秒“yyyy-MM-dd HH:mm:ss” |
| endDate   | 选填     | （新增）结束时间，精确到秒“yyyy-MM-dd HH:mm:ss” |
| pageSize  | 选填     | 页面大小                                        |
| page      | 选填     | 页码                                            |
| api_key   | 必填     | api_key                                      |
| time      | 必填     | 时间戳                                          |
| sort      | 选填     | 1表示倒序                                       |
| sign      | 必填     | 签名                                            |

### 响应数据

| 字段 | 实例  | 解释       |
| ---- | ----- | ---------- |
| code | 0     |            |
| msg  | "suc" | code>0失败 |
| data | 如上图 |


##  取消委托单
取消委托单

### HTTP请求: 
- POST /open/api/cancel_order

### 请求参数

| 参数     | 填写类型 | 说明                         |
| -------- | -------- | ---------------------------- |
| order_id | 必填     | 订单ID                       |
| symbol   | 必填     | 交易对，ethbtc |
| api_key  | 必填     | api_key                      |
| time     | 必填     | 时间戳                       |
| sign     | 必填     | 签名                         |

### 响应数据

| 字段 | 实例  | 解释       |
| ---- | ----- | ---------- |
| code | 0     |
| msg  | "suc" | code>0失败 |
| data | “”    |

## 取消全部委托单
根据币对取消全部委托单（一次请求最多取消2000个订单，多于2000个订单需要重复调用该接口）

### HTTP请求: 
- POST /open/api/cancel_order_all

### 请求参数
| 参数    | 填写类型 | 说明                         |
| ------- | -------- | ---------------------------- |
| symbol  | 必填     | 交易对，ethbtc |
| api_key | 必填     | api_key                      |
| time    | 必填     | 时间戳                       |
| sign    | 必填     | 签名                         |

### 响应数据

| 字段 | 实例  | 解释       |
| ---- | ----- | ---------- |
| code | 0     |
| msg  | "suc" | code>0失败 |
| data | “”    |


## 创建订单
创建订单

### HTTP请求: 
- POST /open/api/create_order

### 请求参数

| 参数                      | 填写类型 | 说明                                                                                                                 |
| ------------------------- | -------- | -------------------------------------------------------------------------------------------------------------------- |
| side                      | 必填     | 买卖方向BUY、SELL                                                                                                    |
| type                      | 必填     | 挂单类型，1:限价委托、2:市价委托                                                                                     |
| volume                    | 必填     | 购买数量（多义，复用字段）<br>type=1:表示买卖数量<br>type=2:买则表示总价格，卖表示总个数<br>买卖限制user/me-用户信息 |
| price                     | 选填     | 委托单价：type=2：不需要此参数                                                                                       |
| symbol                    | 必填     | 交易对，ethbtc                                                                                                     |
| fee_is_user_exchange_coin | 选填     | （冗余字段，忽略）0，当交易所有平台币时，此参数表示是否使用用平台币支付手续费，0否，1是                              |
| api_key                   | 必填     | api_key                                                                                                              |
| time                      | 必填     | 时间戳                                                                                                               |
|  sign  | 必填 | 签名 |                                                                     


> 响应

```json
{
    "code": "0",
    "msg": "suc",
    "data": {
        "order_id":34343
    }
}
```                                 

### 响应数据

| 字段 | 实例               | 解释           |
| ---- | ------------------ | -------------- |
| code | 0                  |
| msg  | "suc"              | code>0失败     |
| data | 如上图 | 成功返回交易ID |

## 批量下单/撤单
批量下单，也可同时批量撤回指定订单
### HTTP请求: 
- POST /open/api/mass_replace

### 请求参数

| 参数        | 填写类型 | 说明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ----------- | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| api_key     | 必填     | api_key                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| time        | 必填     | 时间戳                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| sign        | 必填     | 签名                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| symbol      | 必填     | 币种 ，例 btcusdt                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| mass_cancel | 选填     | [1234,234....] 撤单参数，订单id                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| mass_place  | 选填     | [{side:"BUY",type:"1",volume:"0.01",price:"6400",fee_is_user_exchange_coin:"0"}, {}, …]<br>含义：<br>symbol:币种，例btcusdt<br>mass_place:下单参数。side：方向（买卖方向BUY、SELL），<br>--------------------------------type：类型（1:限价委托、2:市价委托）<br>--------------------------------volume：购买数量（多义，复用字段） type=1:表示买卖数量type=2:买则表示总价格，卖表示总个数<br>--------------------------------price：委托单价：type=2：不需要此参数<br>--------------------------------fee_is_user_exchange_coin：(冗余字段)当交易所有平台币时，此参数表示是否使用用平台币支付手续费，0否，1是 |

* mass_place是需要发送到系统的一批限价订单，每次最多100条
* mass_cancel是需要撤回的一批订单,每次最多100条

> 响应

```json
{
    "code": "0",
    "msg": "suc",
    "data": {
        "mass_place": [
            {
                "order_id":"101180",
                "code":"0", 
                "msg":"suc"
            }
            ... ...
        ],
        "mass_cancel": [
            {
                "order_id":"101180",
                "code":"0", 
                "msg":"suc"
            }
            ... ...       
        ]
    }
}

```

### 响应数据
| 字段 | 实例  | 解释       |
| ---- | ----- | ---------- |
| code | 0     |
| msg  | "suc" | code>0失败 |
| data | 如上图   | <br>下单返回：订单id，状态码，成功(0)/失败(1)<br> <br>撤单返回：订单id，状态码，成功(0)/失败(1)<br>|



## 批量下单/批量撤单-V2
批量下单，同时批量撤回指定订单

### HTTP请求: 
- POST /open/api/mass_replaceV2

### 请求参数
| 参数        | 填写类型 | 说明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| ----------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| api_key     | 必填     | api_key                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| time        | 必填     | 时间戳                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| sign        | 必填     | 签名                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| symbol      | 必填     | 币种 ，例 btcusdt                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| mass_cancel | 选填     | [1234,234....] 撤单参数，订单id                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| mass_place  | 选填     | [{side:"BUY",type:"1",volume:"0.01",price:"6400",fee_is_user_exchange_coin:"0"}, {}, …]<br>含义：<br>symbol:币种，例btcusdt<br>mass_place:下单参数-->side：方向（买卖方向BUY、SELL），<br>--------------------------------type：类型（1:限价委托、2:市价委托）<br>--------------------------------volume：购买数量（多义，复用字段） type=1:表示买卖数量type=2:买则表示总价格，卖表示总个数<br>--------------------------------price：委托单价：type=2：不需要此参数<br>--------------------------------fee_is_user_exchange_coin：(冗余字段)当交易所有平台币时，此参数表示是否使用用平台币支付手续费，0否，1是 |

* mass_place是需要发送到系统的一批限价订单，每次最多1000条

* mass_cancel是需要撤回的一批订单,每次最多1000条


> 响应

```json
{
    "code": "0",
    "msg": "suc",
    "data": {
        "mass_place": [
            {
                "msg": "Success",
                "code": "0",
                "order_id": [504,505]
            },
            {
                "msg": "Order cancellation failed",
                "code": "8",
                "order_id": [504,505]
            }
        ],
        "mass_cancel": [
            {
                "msg": "Success",
                "code": "0",
                "order_id": [572,573,574,626,629]
            }
        ]
    }
}

```

### 响应数据

| 字段 | 实例  | 解释       |
| ---- | ----- | ---------- |
| code | 0     |
| msg  | "suc" | code>0失败 |
| data | 如上图    | <br>下单返回：订单id，状态码，成功(0)/失败(1)<br> <br>撤单返回：订单id，状态码，成功(0)/失败(1)<br>|


## 获取当前委托
获取当前委托，包括未成交和部分成交的委托

### HTTP请求: 
- GET /open/api/v2/new_order

* 旧接口 /open/api/new_order 仍保留,但已经不建议使用

* v2版本变化: 去掉了结果返回值中的tradeList成交记录,提升效率;如果需要单一订单的成交信息,可以使用 /open/api/order_info 接口

> 响应

```json
{
    "code": "0",
    "msg": "suc",
    "data": {
        "count":10,
        "resultList":[
            {
                "side":"BUY",
                "total_price":"0.10000000",
                "created_at":1510993841000,
                "avg_price":"0.10000000",
                "countCoin":"btc",
                "source":1,
                "type":1,
                "side_msg":"买入",
                "volume":"1.000",
                "price":"0.10000000",
                "source_msg":"WEB",
                "status_msg":"完全成交",
                "deal_volume":"1.00000000",
                "id":424,
                "remain_volume":"0.00000000",
                "baseCoin":"eth",
                "status":2
            },
            ...
        ]
    }
}
```

### 请求参数:

| 参数     | 填写类型  | 说明                          |
| -------- | --------- | ----------------------------- |
| symbol    | 必填      | 交易对，btcusdt |
| pageSize | 选填      | 页面大小                      |
| page     | 选填      | 页码                          |
| api_key  | 必填      | api_key                       |
| time     | 必填      | 时间戳                        |
| sign     | 必填      | 签名                          |

### 响应数据:

| 字段 | 实例  | 解释                                                                                                                                                                                                                                          |
| ---- | ----- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| code | 0     |
| msg  | "suc" | code>0失败                                                                                                                                                                                                                                    |
| data | 如上图: | 订单状态(status)说明：<br>INIT(0,"初始订单，未成交未进入盘口"),<br>NEW_(1,"新订单，未成交进入盘口"),<br>FILLED(2,"完全成交"),<br>PART_FILLED(3,"部分成交"),<br>CANCELED(4,"已撤单"),<br>PENDING_CANCEL(5,"待撤单"),<br>EXPIRED(6,"异常订单"); |


##  获取订单详情
获取订单详情
### HTTP请求: 
- GET /open/api/order_info


> 响应

```json
{
    "code": "0",
    "msg": "suc",
    "data": {
        "order_info":{
            "id":343,
            "type":3,
            "side":"sell",
            "side_msg":"卖出",
            "created_at":"1592461624033",
            "price":222.33,
            "volume":222.33,
            "deal_volume":222.33,
            "total_price":222.33,
            "fee":222.33,
            "source":3,
            "source_msg":"API",
            "status":0, 
            "status_msg":"未成交",
            "avg_price":222.33}
        }
        "trade_list":[
            {
                "id":343,
                "created_at":"1592461624033",
                "price":222.33,
                "volume":222.33,
                "deal_price":222.33,
                "fee":222.33
            },
            {
                "id":345,
                "created_at":"1592461624033",
                "price":222.33,
                "volume":222.33,
                "deal_price":222.33,
                "fee":222.33
            }
        ]
    }
}
```

### 请求参数

| 参数     | 填写类型 | 说明                         |
| -------- | -------- | ---------------------------- |
| order_id | 必填     | 订单ID                       |
| symbol   | 必填     | 交易对，ethbtc |
| api_key  | 必填     | api_key                      |
| time     | 必填     | 时间戳                       |
| sign     | 必填     | 签名                         |

### 响应数据:

| 字段 | 实例  | 解释                                                                                                                                                                                                                                          |
| ---- | ----- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| code | 0     |
| msg  | "suc" | code>0失败                                                                                                                                                                                                                                    |
| data | 如上图: | 订单状态(status)说明：<br>INIT(0,"初始订单，未成交未进入盘口"),<br>NEW_(1,"新订单，未成交进入盘口"),<br>FILLED(2,"完全成交"),<br>PART_FILLED(3,"部分成交"),<br>CANCELED(4,"已撤单"),<br>PENDING_CANCEL(5,"待撤单"),<br>EXPIRED(6,"异常订单"); |